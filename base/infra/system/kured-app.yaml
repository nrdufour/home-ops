apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: kured
  namespace: argocd
spec:
  project: default
  source:
    chart: kured
    repoURL: https://kubereboot.github.io/charts
    targetRevision: 5.10.0
    helm:
      releaseName: kured
      values: |
        configuration:
          rebootSentinel: "/var/run/reboot-required"
          period: "10m"
          # Only for nix based node for now ...
          rebootCommand: "/run/current-system/sw/bin/reboot"
  destination:
    namespace: system
    name: 'in-cluster'
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true